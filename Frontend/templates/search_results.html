<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Search Results | Cars R' Us</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/search-results.css') }}">
</head>
<body>
    {% if 'user' in session %}
        <div class="user-info">Welcome, {{ session['user']['FirstName'] }}!</div>
        <a href="{{ url_for('logout') }}" class="logout-button">Logout</a>
    {% else %}
        <a href="{{ url_for('login') }}" class="login-button">Login / Create Account</a>
    {% endif %}
    {% if 'user' in session %}
    <a href="{{ url_for('cart') }}" class="cart-button">
        <i class="fas fa-shopping-cart"></i> Cart
    </a>
{% endif %}
    <h1>Cars R' Us | Search Results</h1>
    <p>Search Query: {{ search_query }}</p>
    <p>Filter Type: {{ filter_type }}</p>
    <div id="search-results">
        {% for car in cars %}
        <div class="car-tile">
            <div class="car-image">
                <img src="{{ url_for('static', filename='img/car-image-placeholder.jpg') }}" alt="Car Image">
            </div>
            <div class="car-info">
                <p><strong>VIN:</strong> {{ car.VIN }}</p>
                <p><strong>Make:</strong> {{ car.Make }}</p>
                <p><strong>Model:</strong> {{ car.Model }}</p>
                <p><strong>Year:</strong> {{ car.Year }}</p>
                <p><strong>Color:</strong> {{ car.Color }}</p>
                <p><strong>Price:</strong> ${{ car.Price }}</p>
                <p><strong>Mileage:</strong> {{ car.Mileage }} miles</p>
                <p><strong>Type:</strong> {{ car.Type }}</p>
                <button class="add-to-cart-button" onclick="addToCart('{{ car.VIN }}')">Add to Cart</button>
            </div>
        </div>
        {% endfor %}
    </div>
    <div class="pagination">
        {% if page > 1 %}
            <a href="{{ url_for('search_results', query=search_query, filter=filter_type, page=page-1) }}">&laquo; Previous</a>
        {% endif %}
        
        {% for i in range(1, total_pages + 1) %}
            {% if i == page %}
                <span class="current-page">{{ i }}</span>
            {% else %}
                <a href="{{ url_for('search_results', query=search_query, filter=filter_type, page=i) }}">{{ i }}</a>
            {% endif %}
        {% endfor %}
        
        {% if page < total_pages %}
            <a href="{{ url_for('search_results', query=search_query, filter=filter_type, page=page+1) }}">Next &raquo;</a>
        {% endif %}
    </div>
</body>
</html>
